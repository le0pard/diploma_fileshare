LeoAdminShop={subnode:null,init:function(){this.init_global_ajax();this.init_catalog_tree();this.init_catalog_links();this.init_check_all();},init_check_all:function(){if($("#checkboxall").length==0){return false;}$("#checkboxall").click(function(){var a=this.checked;$("input.action_checkbox").each(function(){this.checked=a;});});},init_global_ajax:function(){$("#loading").bind("ajaxSend",function(){$(this).show();}).bind("ajaxComplete",function(){$(this).hide();});},init_catalog_links:function(){if($("#add_root_catalog").length==0){return false;}$("#add_root_catalog").bind("click",function(a){$("#content").load(LessJsRoutes.new_admin_catalog_path());LeoAdminShop.subnode=null;return false;});$("#add_sub_catalog").bind("click",function(a){if(LeoAdminShop.subnode){$("#content").load(LessJsRoutes.new_admin_catalog_path()+"?catalog_id="+LeoAdminShop.subnode);}else{$("#content").load(LessJsRoutes.new_admin_catalog_path()+"?catalog_id=0");}return false;});},init_catalog_tree:function(){if($("#catalog_tree").length==0){return false;}$("#catalog_tree").jstree({"html_data":{"ajax":{"url":LessJsRoutes.tree_admin_catalog_index_path(),"data":function(a){return{id:a.attr?a.attr("rel"):0};}}},"ui":{"select_limit":1},"crrm":{"move":{}},"dnd":{"drop_target":false,"drag_target":false},"themes":{"theme":"apple","url":"/stylesheets/vendor/jstree_themes/apple/style.css","dots":true,"icons":false},core:{"animation":0},plugins:["themes","html_data","ui","crrm","dnd"]});$("#catalog_tree").bind("select_node.jstree",function(b,c){var a=c.inst.get_selected();LeoAdminShop.subnode=a.attr("rel");$("#content").load(LessJsRoutes.edit_admin_catalog_path(LeoAdminShop.subnode));return false;});$("#catalog_tree").bind("move_node.jstree",function(e,f){var c=f.rslt.p;var d=f.rslt.o;var b=f.rslt.r;var a=f.rslt.np;$.get(LessJsRoutes.move_admin_catalog_index_path(),{"node":d.attr("rel"),"ref_node":b.attr("rel"),"type":c,"parent":a.attr("rel")});});}};$(document).ready(function(){LeoAdminShop.init();});